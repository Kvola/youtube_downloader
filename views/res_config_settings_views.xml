<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="res_config_settings_view_form" model="ir.ui.view">
        <field name="name">res.config.settings.view.form.youtube</field>
        <field name="model">res.config.settings</field>
        <field name="priority">100</field>
        <field name="inherit_id" ref="base.res_config_settings_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//form" position="inside">
                <app string="YouTube Downloader" name="youtube_downloader"
                     groups="youtube_downloader.group_youtube_manager">

                    <block title="R√©pertoires et stockage">
                        <setting id="youtube_download_path"
                                 string="R√©pertoire par d√©faut"
                                 help="Chemin absolu o√π les vid√©os seront stock√©es.">
                            <field name="youtube_download_path"
                                   placeholder="/home/user/Videos/YouTube"/>
                            <div class="mt-2">
                                <button name="action_test_download_path"
                                        string="üñ•Ô∏è Tester l'acc√®s"
                                        type="object"
                                        class="btn btn-sm btn-outline-secondary"/>
                            </div>
                        </setting>
                        <setting id="youtube_cookie_file"
                                 string="Fichier de cookies YouTube"
                                 help="Pour contourner la d√©tection anti-bot. Exportez vos cookies depuis un navigateur connect√© √† YouTube (format Netscape cookies.txt).">
                            <field name="youtube_cookie_file"
                                   placeholder="/etc/odoo/youtube_cookies.txt"/>
                            <div class="mt-2">
                                <button name="action_test_cookie_file"
                                        string="üç™ Tester le fichier"
                                        type="object"
                                        class="btn btn-sm btn-outline-secondary"/>
                            </div>
                        </setting>
                        <setting string="Espace disque"
                                 help="Informations sur le stockage disponible.">
                            <field name="youtube_disk_space_info" readonly="1"/>
                        </setting>
                        <setting string="Espace minimum requis (Mo)"
                                 help="V√©rification de l'espace disque avant chaque t√©l√©chargement.">
                            <field name="youtube_min_disk_space"/>
                        </setting>
                    </block>

                    <block title="Qualit√© et format">
                        <setting id="youtube_default_quality" string="Qualit√© par d√©faut">
                            <field name="youtube_default_quality"/>
                        </setting>
                        <setting id="youtube_default_format" string="Format par d√©faut">
                            <field name="youtube_default_format"/>
                        </setting>
                    </block>

                    <block title="Performances et robustesse">
                        <setting id="youtube_max_concurrent"
                                 string="T√©l√©chargements simultan√©s"
                                 help="Nombre de t√©l√©chargements pouvant s'ex√©cuter en parall√®le.">
                            <field name="youtube_max_concurrent"/>
                        </setting>
                        <setting id="youtube_auto_fetch_info"
                                 string="R√©cup√©ration automatique des infos">
                            <field name="youtube_auto_fetch_info"/>
                        </setting>
                        <setting id="youtube_auto_retry"
                                 string="R√©essayer automatiquement"
                                 help="Relancer automatiquement les t√©l√©chargements en erreur.">
                            <field name="youtube_auto_retry"/>
                        </setting>
                        <setting id="youtube_max_retries"
                                 string="Nombre de tentatives par d√©faut">
                            <field name="youtube_max_retries"/>
                        </setting>
                    </block>

                    <block title="Telegram">
                        <setting id="telegram_api_id"
                                 string="API ID"
                                 help="Obtenez votre API ID sur https://my.telegram.org ‚Üí API development tools.">
                            <field name="telegram_api_id"
                                   placeholder="12345678"/>
                        </setting>
                        <setting id="telegram_api_hash"
                                 string="API Hash"
                                 help="Obtenez votre API Hash sur https://my.telegram.org ‚Üí API development tools.">
                            <field name="telegram_api_hash"
                                   placeholder="abc123def456..."
                                   password="True"/>
                        </setting>
                        <setting id="telegram_phone"
                                 string="Num√©ro de t√©l√©phone"
                                 help="Num√©ro de t√©l√©phone associ√© au compte Telegram (format international).">
                            <field name="telegram_phone"
                                   placeholder="+225XXXXXXXXXX"/>
                        </setting>
                        <setting id="telegram_session_path"
                                 string="Chemin de session"
                                 help="Chemin o√π stocker le fichier de session Telegram.">
                            <field name="telegram_session_path"
                                   placeholder="/tmp/youtube_downloads/telegram_session"/>
                        </setting>
                        <setting id="telegram_max_concurrent"
                                 string="T√©l√©chargements simultan√©s"
                                 help="Nombre de vid√©os Telegram t√©l√©charg√©es en parall√®le (s√©maphore asyncio). Recommand√© : 2 √† 5.">
                            <field name="telegram_max_concurrent"/>
                        </setting>
                        <setting string="Version Telethon"
                                 help="Librairie Python utilis√©e pour l'API Telegram.">
                            <div class="d-flex align-items-center gap-2">
                                <field name="telegram_telethon_version" readonly="1"/>
                                <button name="action_install_telethon"
                                        string="üì¶ Installer / Mettre √† jour"
                                        type="object"
                                        class="btn btn-sm btn-outline-primary"/>
                                <button name="action_telegram_authenticate"
                                        string="üîê Se connecter"
                                        type="object"
                                        class="btn btn-sm btn-outline-success"/>
                            </div>
                        </setting>
                    </block>

                    <block title="Informations syst√®me">
                        <setting string="Version yt-dlp"
                                 help="Librairie Python utilis√©e pour les t√©l√©chargements.">
                            <div class="d-flex align-items-center gap-2">
                                <field name="youtube_ytdlp_version" readonly="1"/>
                                <button name="action_install_ytdlp"
                                        string="üîÑ Installer / Mettre √† jour"
                                        type="object"
                                        class="btn btn-sm btn-outline-primary"/>
                            </div>
                        </setting>
                        <setting string="Statistiques">
                            <div class="d-flex gap-4">
                                <div>
                                    <span class="text-muted">Total t√©l√©charg√©s :</span>
                                    <strong><field name="youtube_total_downloads"/></strong>
                                </div>
                                <div>
                                    <span class="text-muted">Taille totale :</span>
                                    <strong><field name="youtube_total_size"/></strong>
                                </div>
                            </div>
                        </setting>
                    </block>
                </app>
            </xpath>
        </field>
    </record>
</odoo>
